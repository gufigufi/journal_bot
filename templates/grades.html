<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ subject }} - –û—Ü—ñ–Ω–∫–∏</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>

<body>
    <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">üåì</button>
    <div class="container">
        <div class="grades-box">
            <div class="header">
                <h1>üìä {{ subject }}</h1>
                <div class="user-info">
                    <span>–°—Ç—É–¥–µ–Ω—Ç: <strong>{{ student_name }}</strong></span>
                    <a href="/logout" class="btn-logout">–í–∏–π—Ç–∏</a>
                </div>
            </div>

            <div class="navigation">
                <a href="/dashboard" class="btn-back">‚Üê –ù–∞–∑–∞–¥ –¥–æ –ø—Ä–µ–¥–º–µ—Ç—ñ–≤</a>

                {% if sort_order == 'desc' %}
                <a href="?sort=asc" class="btn-sort">‚Üì –°–ø–æ—á–∞—Ç–∫—É —Å—Ç–∞—Ä—ñ</a>
                {% else %}
                <a href="?sort=desc" class="btn-sort">‚Üë –°–ø–æ—á–∞—Ç–∫—É –Ω–æ–≤—ñ</a>
                {% endif %}
            </div>

            {% if error %}
            <div class="error-message">
                {{ error }}
            </div>
            {% else %}
            <div class="grades-table-wrapper">
                <table class="grades-table">
                    <thead>
                        <tr>
                            <th>‚Ññ</th>
                            <th>–¢–∏–ø –∑–∞–Ω—è—Ç—Ç—è</th>
                            <th>–î–∞—Ç–∞</th>
                            <th>–û—Ü—ñ–Ω–∫–∞</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for grade in grades %}
                        {% set row_class = '' %}
                        {% if grade.lesson_type and grade.lesson_type.strip() in ['–ü', '–ê–¢'] %}
                        {% if grade.grade and grade.grade != '–ø—É—Å—Ç–æ' and grade.grade != '–ù–ë' %}
                        {% set row_class = 'row-green' %}
                        {% else %}
                        {% set row_class = 'row-red' %}
                        {% endif %}
                        {% endif %}
                        <tr class="{{ row_class }}">
                            <td>{{ loop.index }}</td>
                            <td>{{ grade.lesson_type if grade.lesson_type else '-' }}</td>
                            <td>{{ grade.lesson_date if grade.lesson_date else '-' }}</td>
                            <td
                                class="grade-cell {% if grade.grade == '–ù–ë' %}grade-absent{% elif grade.grade == '–ø—É—Å—Ç–æ' %}grade-empty{% endif %}">
                                {{ grade.grade }}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% endif %}
        </div>
    </div>
    <script src="/static/js/theme.js"></script>
</body>

</html>