# –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è Telegram-–±–æ—Ç–∞ –æ—Ü—ñ–Ω–æ–∫ –Ω–∞ Raspberry Pi

–ü–æ–≤–Ω–∏–π –ø–æ–∫—Ä–æ–∫–æ–≤–∏–π –≥–∞–π–¥ –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∑ Telegram-–±–æ—Ç–æ–º –Ω–∞ Raspberry Pi –∑ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è–º –ø—ñ–¥–¥–æ–º–µ–Ω—É.

## –©–æ —Ü–µ –∑–∞ –ø—Ä–æ–µ–∫—Ç?

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏—Ö —Å–ø–æ–≤—ñ—â–µ–Ω—å –ø—Ä–æ –∑–º—ñ–Ω–∏ –æ—Ü—ñ–Ω–æ–∫ —É Google Sheets —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞ –∑ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –æ—Ü—ñ–Ω–æ–∫.

**–û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:**
- üîî –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ push-—Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ –æ—Ü—ñ–Ω–æ–∫
- üë®‚Äçüéì –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ç—Ä—å–æ—Ö —Ä–æ–ª–µ–π: —Å—Ç—É–¥–µ–Ω—Ç, –±–∞—Ç—å–∫–æ, –º–∞—Ç–∏
- üìä –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Google Sheets
- üåê –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –æ—Ü—ñ–Ω–æ–∫
- üîí –°—Ç—Ä–æ–≥–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –∑–∞ –ü–Ü–ë

---

## –ö—Ä–æ–∫ 1: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ Raspberry Pi

### 1.1 –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Docker

```bash
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo usermod -aG docker $USER
```

–ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ Raspberry Pi –∞–±–æ –≤–∏–π–¥—ñ—Ç—å —ñ –∑–∞–π–¥—ñ—Ç—å –∑–Ω–æ–≤—É:
```bash
sudo reboot
```

### 1.2 –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Docker Compose

```bash
sudo apt-get update
sudo apt-get install -y docker-compose
```

–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è:
```bash
docker --version
docker-compose --version
```

---

## –ö—Ä–æ–∫ 2: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Telegram –±–æ—Ç–∞

### 2.1 –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–æ—Ç–∞

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Telegram —ñ –∑–Ω–∞–π–¥—ñ—Ç—å [@BotFather](https://t.me/BotFather)
2. –í—ñ–¥–ø—Ä–∞–≤—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –í–≤–µ–¥—ñ—Ç—å —ñ–º'—è –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: "Grades Notification Bot")
4. –í–≤–µ–¥—ñ—Ç—å username –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: "my_grades_bot")
5. **–ó–±–µ—Ä–µ–∂—ñ—Ç—å —Ç–æ–∫–µ–Ω** - –≤—ñ–Ω –≤–∏–≥–ª—è–¥–∞—î —Ç–∞–∫: `1234567890:ABCdefGHIjklMNOpqrsTUVwxyz`

---

## –ö—Ä–æ–∫ 3: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Google Sheets API

### 3.1 –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É –≤ Google Cloud

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ [Google Cloud Console](https://console.cloud.google.com/)
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Create Project"** –∞–±–æ –≤–∏–±–µ—Ä—ñ—Ç—å —ñ—Å–Ω—É—é—á–∏–π –ø—Ä–æ–µ–∫—Ç
3. –í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –ø—Ä–æ–µ–∫—Ç—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: "Grades Bot")

### 3.2 –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è Google Sheets API

1. –í –º–µ–Ω—é –∑–ª—ñ–≤–∞ –≤–∏–±–µ—Ä—ñ—Ç—å **"APIs & Services"** ‚Üí **"Library"**
2. –ó–Ω–∞–π–¥—ñ—Ç—å **"Google Sheets API"**
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Enable"**

### 3.3 –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Service Account

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ **"APIs & Services"** ‚Üí **"Credentials"**
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Create Credentials"** ‚Üí **"Service Account"**
3. –í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: "grades-bot-service")
4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Create and Continue"**
5. –í–∏–±–µ—Ä—ñ—Ç—å —Ä–æ–ª—å **"Editor"** (–∞–±–æ "Viewer" —è–∫—â–æ –±–æ—Ç —Ç—ñ–ª—å–∫–∏ —á–∏—Ç–∞—î)
6. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Done"**

### 3.4 –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–ª—é—á–∞

1. –ó–Ω–∞–π–¥—ñ—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω–∏–π Service Account –≤ —Å–ø–∏—Å–∫—É
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –Ω—å–æ–≥–æ
3. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"Keys"**
4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Add Key"** ‚Üí **"Create new key"**
5. –í–∏–±–µ—Ä—ñ—Ç—å —Ñ–æ—Ä–º–∞—Ç **JSON**
6. –§–∞–π–ª `credentials.json` –±—É–¥–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ –Ω–∞ –≤–∞—à –∫–æ–º–ø'—é—Ç–µ—Ä

### 3.5 –ù–∞–¥–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –¥–æ Google Sheets

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ñ–∞–π–ª `credentials.json`
2. –ó–Ω–∞–π–¥—ñ—Ç—å –ø–æ–ª–µ `client_email` (–≤–∏–≥–ª—è–¥–∞—î —è–∫ `xxx@xxx.iam.gserviceaccount.com`)
3. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤–∞—à—É Google Sheets —Ç–∞–±–ª–∏—Ü—é
4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Share"** (–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è)
5. –í—Å—Ç–∞–≤—Ç–µ email –∑ `client_email`
6. –ù–∞–¥–∞–π—Ç–µ –ø—Ä–∞–≤–∞ **"Editor"** (–∞–±–æ "Viewer")
7. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Send"**

---

## –ö—Ä–æ–∫ 4: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—ñ–¥–¥–æ–º–µ–Ω—É

### 4.1 –û—Ç—Ä–∏–º–∞–Ω–Ω—è IP –∞–¥—Ä–µ—Å–∏ Raspberry Pi

–ù–∞ Raspberry Pi –≤–∏–∫–æ–Ω–∞–π—Ç–µ:
```bash
hostname -I
```

–ó–∞–ø–∏—à—ñ—Ç—å **–ª–æ–∫–∞–ª—å–Ω—É IP –∞–¥—Ä–µ—Å—É** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `192.168.1.100`)

### 4.2 –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Port Forwarding –Ω–∞ —Ä–æ—É—Ç–µ—Ä—ñ

1. –ó–∞–π–¥—ñ—Ç—å –≤ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å –≤–∞—à–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞ (–∑–∞–∑–≤–∏—á–∞–π `192.168.1.1` –∞–±–æ `192.168.0.1`)
2. –ó–Ω–∞–π–¥—ñ—Ç—å —Ä–æ–∑–¥—ñ–ª **"Port Forwarding"** –∞–±–æ **"Virtual Server"**
3. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–µ –ø—Ä–∞–≤–∏–ª–æ:
   - **External Port**: `80` (HTTP)
   - **Internal IP**: IP –∞–¥—Ä–µ—Å–∞ –≤–∞—à–æ–≥–æ Raspberry Pi (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `192.168.1.100`)
   - **Internal Port**: `8080`
   - **Protocol**: `TCP`
4. –ó–±–µ—Ä–µ–∂—ñ—Ç—å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### 4.3 –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—É–±–ª—ñ—á–Ω–æ—ó IP –∞–¥—Ä–µ—Å–∏

–í–∏–∫–æ–Ω–∞–π—Ç–µ –Ω–∞ Raspberry Pi:
```bash
curl ifconfig.me
```

–ó–∞–ø–∏—à—ñ—Ç—å –≤–∞—à—É **–ø—É–±–ª—ñ—á–Ω—É IP –∞–¥—Ä–µ—Å—É** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `203.0.113.45`)

### 4.4 –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è DNS –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥—É

1. –ó–∞–π–¥—ñ—Ç—å –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –≤–∞—à–æ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥—É (–¥–µ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π –¥–æ–º–µ–Ω)
2. –ó–Ω–∞–π–¥—ñ—Ç—å —Ä–æ–∑–¥—ñ–ª **"DNS Management"** –∞–±–æ **"DNS Records"**
3. –î–æ–¥–∞–π—Ç–µ –Ω–æ–≤–∏–π **A-–∑–∞–ø–∏—Å**:
   - **Type**: `A`
   - **Name**: `grades` (–∞–±–æ –±—É–¥—å-—è–∫–µ —ñ–º'—è –ø—ñ–¥–¥–æ–º–µ–Ω—É)
   - **Value/Points to**: –í–∞—à–∞ –ø—É–±–ª—ñ—á–Ω–∞ IP –∞–¥—Ä–µ—Å–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `203.0.113.45`)
   - **TTL**: `3600` (–∞–±–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)
4. –ó–±–µ—Ä–µ–∂—ñ—Ç—å –∑–º—ñ–Ω–∏

**–ü—Ä–∏–∫–ª–∞–¥:** –Ø–∫—â–æ –≤–∞—à –¥–æ–º–µ–Ω `example.com`, —Ç–æ –ø—ñ–¥–¥–æ–º–µ–Ω –±—É–¥–µ `grades.example.com`

**–í–∞–∂–ª–∏–≤–æ:** DNS –∑–º—ñ–Ω–∏ –º–æ–∂—É—Ç—å –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏—Å—è –≤—ñ–¥ 5 —Ö–≤–∏–ª–∏–Ω –¥–æ 48 –≥–æ–¥–∏–Ω.

### 4.5 –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ DNS

–ß–µ—Ä–µ–∑ 10-15 —Ö–≤–∏–ª–∏–Ω –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ:
```bash
nslookup grades.example.com
```

–ú–∞—î –≤—ñ–¥–æ–±—Ä–∞–∑–∏—Ç–∏—Å—è –≤–∞—à–∞ –ø—É–±–ª—ñ—á–Ω–∞ IP –∞–¥—Ä–µ—Å–∞.

---

## –ö—Ä–æ–∫ 5: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç—É –Ω–∞ Raspberry Pi

### 5.1 –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

```bash
cd ~
git clone <URL_–≤–∞—à–æ–≥–æ_—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é>
cd <–Ω–∞–∑–≤–∞_–ø—Ä–æ–µ–∫—Ç—É>
```

### 5.2 –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è credentials.json

–°–∫–æ–ø—ñ—é–π—Ç–µ —Ñ–∞–π–ª `credentials.json` (–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π –∑ Google Cloud) –Ω–∞ Raspberry Pi –≤ –∫–æ—Ä—ñ–Ω—å –ø—Ä–æ–µ–∫—Ç—É:

```bash
scp credentials.json pi@<IP_Raspberry_Pi>:~/<–Ω–∞–∑–≤–∞_–ø—Ä–æ–µ–∫—Ç—É>/
```

–ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ SFTP –∫–ª—ñ—î–Ω—Ç (FileZilla, WinSCP).

### 5.3 –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –¥–ª—è –¥–∞–Ω–∏—Ö

```bash
mkdir -p data
```

---

## –ö—Ä–æ–∫ 6: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è .env —Ñ–∞–π–ª—É

### 6.1 –°—Ç–≤–æ—Ä–µ–Ω–Ω—è .env

```bash
cp .env.example .env
nano .env
```

### 6.2 –ó–∞–ø–æ–≤–Ω–µ–Ω–Ω—è .env

–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞—Å—Ç—É–ø–Ω–∏–º —á–∏–Ω–æ–º:

```env
# –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ (–æ—Ç—Ä–∏–º–∞–Ω–∏–π –≤—ñ–¥ @BotFather)
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz

# –ü—É–±–ª—ñ—á–Ω–∏–π URL –≤–∞—à–æ–≥–æ –ø—ñ–¥–¥–æ–º–µ–Ω—É (–ë–ï–ó —Å–ª–µ—à—É –≤ –∫—ñ–Ω—Ü—ñ)
PUBLIC_BASE_URL=http://grades.example.com

# –°–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–ª—é—á –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É webhook (–∑–≥–µ–Ω–µ—Ä—É–π—Ç–µ –≤–∏–ø–∞–¥–∫–æ–≤–∏–π —Ä—è–¥–æ–∫)
APPS_SCRIPT_WEBHOOK_SECRET=my_super_secret_key_12345

# –®–ª—è—Ö –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö (–∑–∞–ª–∏—à—Ç–µ —è–∫ —î –¥–ª—è Docker)
DATABASE_PATH=/app/data/grades.db

# –ü–æ—Ä—Ç –¥–ª—è webhook —Å–µ—Ä–≤–µ—Ä–∞ (–∑–∞–ª–∏—à—Ç–µ 8080)
WEBHOOK_PORT=8080

# –ü–æ—Ä—Ç –¥–ª—è –≤–µ–±-–¥–æ–¥–∞—Ç–∫—É (–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ Docker, –∞–ª–µ –∑–∞–ª–∏—à—Ç–µ)
WEB_PORT=8081

# –°–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–ª—é—á –¥–ª—è –≤–µ–±-—Å–µ—Å—ñ–π (–∑–≥–µ–Ω–µ—Ä—É–π—Ç–µ –≤–∏–ø–∞–¥–∫–æ–≤–∏–π —Ä—è–¥–æ–∫)
WEB_SECRET_KEY=another_random_secret_key_67890

# –®–ª—è—Ö –¥–æ Google credentials (–∑–∞–ª–∏—à—Ç–µ —è–∫ —î)
GOOGLE_CREDENTIALS_PATH=./credentials.json
```

### 6.3 –ü–æ—è—Å–Ω–µ–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö

| –ó–º—ñ–Ω–Ω–∞ | –û–ø–∏—Å | –ü—Ä–∏–∫–ª–∞–¥ |
|--------|------|---------|
| `TELEGRAM_BOT_TOKEN` | –¢–æ–∫–µ–Ω –≤—ñ–¥ @BotFather | `1234567890:ABCdefGHIjklMNOpqrsTUVwxyz` |
| `PUBLIC_BASE_URL` | –í–∞—à –ø—ñ–¥–¥–æ–º–µ–Ω (–±–µ–∑ `/` –≤ –∫—ñ–Ω—Ü—ñ) | `http://grades.example.com` |
| `APPS_SCRIPT_WEBHOOK_SECRET` | –í–∏–ø–∞–¥–∫–æ–≤–∏–π —Ä—è–¥–æ–∫ –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É webhook | `my_super_secret_key_12345` |
| `DATABASE_PATH` | –®–ª—è—Ö –¥–æ –ë–î –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ | `/app/data/grades.db` (–Ω–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏) |
| `WEBHOOK_PORT` | –ü–æ—Ä—Ç webhook —Å–µ—Ä–≤–µ—Ä–∞ | `8080` (–Ω–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏) |
| `WEB_PORT` | –ü–æ—Ä—Ç –≤–µ–±-–¥–æ–¥–∞—Ç–∫—É | `8081` |
| `WEB_SECRET_KEY` | –ö–ª—é—á –¥–ª—è —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è —Å–µ—Å—ñ–π | `another_random_secret_key_67890` |
| `GOOGLE_CREDENTIALS_PATH` | –®–ª—è—Ö –¥–æ credentials.json | `./credentials.json` (–Ω–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏) |

### 6.4 –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Å–µ–∫—Ä–µ—Ç–Ω–∏—Ö –∫–ª—é—á—ñ–≤

–î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö –∫–ª—é—á—ñ–≤ –≤–∏–∫–æ–Ω–∞–π—Ç–µ:

```bash
openssl rand -hex 32
```

–í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è `APPS_SCRIPT_WEBHOOK_SECRET` —Ç–∞ `WEB_SECRET_KEY`.

–ó–±–µ—Ä–µ–∂—ñ—Ç—å —Ñ–∞–π–ª: `Ctrl+O`, `Enter`, `Ctrl+X`

---

## –ö—Ä–æ–∫ 7: –ó–∞–ø—É—Å–∫ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

### 7.1 –ó–±—ñ—Ä–∫–∞ —Ç–∞ –∑–∞–ø—É—Å–∫

```bash
docker-compose up -d
```

–¶—è –∫–æ–º–∞–Ω–¥–∞:
- –ó–±—É–¥—É—î Docker –æ–±—Ä–∞–∑
- –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ —Ñ–æ–Ω–æ–≤–æ–º—É —Ä–µ–∂–∏–º—ñ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ Raspberry Pi

### 7.2 –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É

```bash
docker-compose ps
```

–ú–∞—î –≤—ñ–¥–æ–±—Ä–∞–∑–∏—Ç–∏—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `grades-bot` –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º `Up`.

### 7.3 –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤

```bash
docker-compose logs -f
```

–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å `Ctrl+C` –¥–ª—è –≤–∏—Ö–æ–¥—É –∑ –ø–µ—Ä–µ–≥–ª—è–¥—É –ª–æ–≥—ñ–≤.

---

## –ö—Ä–æ–∫ 8: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Google Apps Script

### 8.1 –í—ñ–¥–∫—Ä–∏—Ç—Ç—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ —Å–∫—Ä–∏–ø—Ç—ñ–≤

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤–∞—à—É Google Sheets —Ç–∞–±–ª–∏—Ü—é
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ **–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è** ‚Üí **Apps Script**

### 8.2 –í—Å—Ç–∞–≤–∫–∞ –∫–æ–¥—É

1. –í–∏–¥–∞–ª—ñ—Ç—å –≤–µ—Å—å —ñ—Å–Ω—É—é—á–∏–π –∫–æ–¥
2. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ñ–∞–π–ª `gas_script.gs` –∑ –ø—Ä–æ–µ–∫—Ç—É
3. –°–∫–æ–ø—ñ—é–π—Ç–µ –≤–µ—Å—å –∫–æ–¥
4. –í—Å—Ç–∞–≤—Ç–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä Apps Script

### 8.3 –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö

–ó–Ω–∞–π–¥—ñ—Ç—å –≤ –∫–æ–¥—ñ –Ω–∞—Å—Ç—É–ø–Ω—ñ —Ä—è–¥–∫–∏ —ñ –∑–∞–º—ñ–Ω—ñ—Ç—å:

```javascript
const WEBHOOK_URL = 'http://grades.example.com/webhook';
const SECRET = 'my_super_secret_key_12345';
```

- `WEBHOOK_URL` - –≤–∞—à –ø—ñ–¥–¥–æ–º–µ–Ω + `/webhook`
- `SECRET` - –∑–Ω–∞—á–µ–Ω–Ω—è –∑ `.env` (`APPS_SCRIPT_WEBHOOK_SECRET`)

### 8.4 –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç—Ä–∏–≥–µ—Ä–∞

1. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"–ó–±–µ—Ä–µ–≥—Ç–∏ –ø—Ä–æ–µ–∫—Ç"** (—ñ–∫–æ–Ω–∫–∞ –¥–∏—Å–∫–µ—Ç–∏)
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"–¢—Ä–∏–≥–µ—Ä–∏"** (—ñ–∫–æ–Ω–∫–∞ –≥–æ–¥–∏–Ω–Ω–∏–∫–∞ –∑–ª—ñ–≤–∞)
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"–î–æ–¥–∞—Ç–∏ —Ç—Ä–∏–≥–µ—Ä"**
4. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ:
   - **–§—É–Ω–∫—Ü—ñ—è**: `onChange`
   - **–¢–∏–ø –ø–æ–¥—ñ—ó**: `–ó—ñ spreadsheet`
   - **–¢–∏–ø –ø–æ–¥—ñ—ó**: `–ü—Ä–∏ –∑–º—ñ–Ω—ñ`
5. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"–ó–±–µ—Ä–µ–≥—Ç–∏"**
6. –ù–∞–¥–∞–π—Ç–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥–æ–∑–≤–æ–ª–∏ (–∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—è)

---

## –ö—Ä–æ–∫ 9: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏

### 9.1 –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Telegram –±–æ—Ç–∞

1. –ó–Ω–∞–π–¥—ñ—Ç—å –≤–∞—à–æ–≥–æ –±–æ—Ç–∞ –≤ Telegram
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å `/start`
3. –ë–æ—Ç –º–∞—î –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è–º

### 9.2 –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É

–í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:
```
http://grades.example.com
```

–ú–∞—î –≤—ñ–¥–∫—Ä–∏—Ç–∏—Å—è —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –≤—Ö–æ–¥—É.

### 9.3 –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ webhook

–ó–º—ñ–Ω—ñ—Ç—å –±—É–¥—å-—è–∫—É –æ—Ü—ñ–Ω–∫—É –≤ Google Sheets —Ç–∞–±–ª–∏—Ü—ñ. –ë–æ—Ç –º–∞—î –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º.

---

## –ö—Ä–æ–∫ 10: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è HTTPS (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ, –∞–ª–µ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

### 10.1 –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Nginx

```bash
sudo apt-get update
sudo apt-get install -y nginx
```

### 10.2 –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Certbot

```bash
sudo apt-get install -y certbot python3-certbot-nginx
```

### 10.3 –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Nginx

–°—Ç–≤–æ—Ä—ñ—Ç—å –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é:
```bash
sudo nano /etc/nginx/sites-available/grades-bot
```

–í—Å—Ç–∞–≤—Ç–µ:
```nginx
server {
    listen 80;
    server_name grades.example.com;

    location / {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

–ê–∫—Ç–∏–≤—É–π—Ç–µ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é:
```bash
sudo ln -s /etc/nginx/sites-available/grades-bot /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

### 10.4 –û—Ç—Ä–∏–º–∞–Ω–Ω—è SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞

```bash
sudo certbot --nginx -d grades.example.com
```

–°–ª—ñ–¥—É–π—Ç–µ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è–º. Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞–ª–∞—à—Ç—É—î HTTPS.

### 10.5 –û–Ω–æ–≤–ª–µ–Ω–Ω—è .env

–ó–º—ñ–Ω—ñ—Ç—å –≤ `.env`:
```env
PUBLIC_BASE_URL=https://grades.example.com
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
```bash
docker-compose restart
```

### 10.6 –û–Ω–æ–≤–ª–µ–Ω–Ω—è Port Forwarding

–î–æ–¥–∞–π—Ç–µ –≤ —Ä–æ—É—Ç–µ—Ä—ñ —â–µ –æ–¥–Ω–µ –ø—Ä–∞–≤–∏–ª–æ:
- **External Port**: `443` (HTTPS)
- **Internal IP**: IP Raspberry Pi
- **Internal Port**: `443`
- **Protocol**: `TCP`

---

## –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
```bash
docker-compose restart
```

### –ó—É–ø–∏–Ω–∫–∞
```bash
docker-compose down
```

### –ó–∞–ø—É—Å–∫
```bash
docker-compose up -d
```

### –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
```bash
docker-compose logs -f
```

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–¥—É
```bash
git pull
docker-compose down
docker-compose up -d --build
```

---

## Troubleshooting

### –ë–æ—Ç –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î
```bash
docker-compose logs | grep -i error
```
–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `TELEGRAM_BOT_TOKEN` –≤ `.env`

### Webhook –Ω–µ –ø—Ä–∞—Ü—é—î
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å –ø—ñ–¥–¥–æ–º–µ–Ω—É: `curl http://grades.example.com/webhook`
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Port Forwarding –Ω–∞ —Ä–æ—É—Ç–µ—Ä—ñ
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `APPS_SCRIPT_WEBHOOK_SECRET` –≤ `.env` —Ç–∞ Google Apps Script

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è
```bash
docker-compose logs
```
–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å `credentials.json` —Ç–∞ `.env`

### DNS –Ω–µ –ø—Ä–∞—Ü—é—î
```bash
nslookup grades.example.com
ping grades.example.com
```
–ó–∞—á–µ–∫–∞–π—Ç–µ –¥–æ 48 –≥–æ–¥–∏–Ω –¥–ª—è –ø–æ—à–∏—Ä–µ–Ω–Ω—è DNS

### –ü–æ–º–∏–ª–∫–∏ Google Sheets API
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å `credentials.json`
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–æ—Å—Ç—É–ø Service Account –¥–æ —Ç–∞–±–ª–∏—Ü—ñ
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ Google Sheets API —É–≤—ñ–º–∫–Ω–µ–Ω–∏–π

---

## –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ

Docker Compose –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤—É—î –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ (`restart: unless-stopped`). –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è Raspberry Pi.

–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:
```bash
sudo reboot
```

–ü—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è:
```bash
docker-compose ps
```

---

## –ë–µ–∑–ø–µ–∫–∞

- ‚úÖ –ù—ñ–∫–æ–ª–∏ –Ω–µ –ø—É–±–ª—ñ–∫—É–π—Ç–µ `.env` —Ç–∞ `credentials.json`
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Å–∏–ª—å–Ω—ñ —Å–µ–∫—Ä–µ—Ç–Ω—ñ –∫–ª—é—á—ñ (–º—ñ–Ω—ñ–º—É–º 32 —Å–∏–º–≤–æ–ª–∏)
- ‚úÖ –ù–∞–ª–∞—à—Ç—É–π—Ç–µ HTTPS –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –¥–∞–Ω–∏—Ö
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–Ω–æ–≤–ª—é–π—Ç–µ —Å–∏—Å—Ç–µ–º—É: `sudo apt-get update && sudo apt-get upgrade`
- ‚úÖ –ó–º—ñ–Ω—ñ—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –ø–∞—Ä–æ–ª—å Raspberry Pi: `passwd`
- ‚úÖ –ù–∞–ª–∞—à—Ç—É–π—Ç–µ firewall: `sudo apt-get install ufw && sudo ufw enable`

---

## –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å—ñ–≤
```bash
docker stats grades-bot
```

### –†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
```bash
cp data/grades.db data/grades.db.backup
```

### –û—á–∏—â–µ–Ω–Ω—è Docker
```bash
docker system prune -a
```

### –ü–µ—Ä–µ–≥–ª—è–¥ IP –∞–¥—Ä–µ—Å–∏
```bash
hostname -I
curl ifconfig.me
```

---

## –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º–∏:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏: `docker-compose logs -f`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å: `docker-compose ps`
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é: `cat .env`
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä: `docker-compose restart`

---

**–£—Å–ø—ñ—à–Ω–æ–≥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è! üöÄ**
